# RelTableDSL
**RelTable** — это специализированный язык программирования (DSL) для работы с реляционными таблицами. Проект включает в себя полный цикл разработки языка: от описания грамматики (ANTLR4) до генерации машинного кода через LLVM IR и линковки с рантаймом на C.

## Особенности языка
- **Работа с таблицами**: Встроенные функции `create_table`, `add_column`, `add_row`.
- **Замыкания (Closures)**: Поддержка лямбда-выражений, которые захватывают переменные из внешнего окружения (используется в `select`).
- **Управляющие конструкции**: Циклы `for`, условия `if-else`, и мощный `switch` с поддержкой диапазонов (например, `case 0 to 17`).
- **Статическая типизация**: Базовая проверка типов на этапе семантического анализа.
- **Компиляция в Native**: DSL преобразуется в LLVM IR, который затем компилируется в полноценный исполняемый файл (`.exe`).

## Структура проекта
- `grammar/RelTable.g4`: Грамматика языка для ANTLR4.
- `analyzer/`: Семантический анализатор (проверка областей видимости и типов).
- `compiler/`: Генератор LLVM IR кода на Python (использует `llvmlite`).
- `runtime.c`: Библиотека поддержки на языке C (управление памятью таблиц, вывод в консоль).
- `main_compiler.py`: Точка входа компилятора.
- `build.py`: Скрипт автоматизации сборки (Pipeline).
- **`test_final.dsl`** — файл для тестирования. Он содержит примеры всех возможностей языка:
    - Создание таблиц и колонок.
    - Массовое добавление строк.
    - Фильтрация через `select` с использованием **замыканий** (лямбда-функции).
    - Условные переходы и циклы `for`.
    - Сложный `switch` по диапазонам значений.
    - Объявление и вызов пользовательских функций (`func`).

## Подготовка к запуску
Установка зависимостей:
   ```bash
   pip install -r requirements.txt
 ```
Генерация кода парсера (ANTLR4)
```bash
antlr4 -Dlanguage=Python3 -visitor -no-listener -o gen/ grammar/RelTable.g4
```

